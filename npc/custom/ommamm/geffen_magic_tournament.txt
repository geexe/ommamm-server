izlude,127,139,3	script	Emmitt White::gef_magic_init	641,{
	
	.npc$ = "[Geffen Magic Tournament]";
	
	if(checkquest(70001,PLAYTIME) == 0 || checkquest(70001,PLAYTIME) == 1 ) {
		mes .npc$;
		mes "You can participate in the tournament again after 23 hours.";
		close;
	} else if (checkquest(70001,PLAYTIME) == 2) {
		erasequest(70001);
	}
	mes .npc$;
	mes "Welcome to Geffen Magic Tournament.";
	next;
	mes .npc$;
	mes "This was a tournament held in the ancient past, where magicians around Rune-Midgard convened to find the true master of magic.";
	next;
	mes .npc$;
	mes "Here you will be battling various heroes in a tournament manner:";
	mes "1-On-1 for 12 rounds";
	next;
	mes .npc$;
	mes "Are you interested in joining the tournament?";
	next;
	switch(select("Sure:I would rather not risk my life...")) {
	case 1:
		break;
	case 2:
		mes .npc$;
		mes "I would not blame you for that!";
		close;
	}
	mes .npc$;
	mes "That's the spirit!";
	mes "Are you ready to enter the time gap?";
	next;
	switch(select("Enter:I need more time to prepare")) {
	case 1:
		break;
	case 2:
		mes .npc$;
		mes "Come back when you are ready.";
		close;
	}
	getpartymember getcharid(1);
	if($@partymembercount > 1) {
		mes .npc$;
		mes "Only 1 person is allowed in the party.";
		close;
	}
	if(instance_create("Geffen Magic Tournament") < 0) {
		mes "Can't generate instance.";
		close;
	};
	next;
	switch(instance_enter("Geffen Magic Tournament")) {
	case 3:
		mes "An unknown error has occurred.";
		close;
	case 2:
		mes "The memorial dungeon Geffen Magic Tournament does not exist.";
		mes "The party leader did not generate the dungeon yet.";
		close;
		break;
	case 1:
		mes "You can enter the dungeon after making the party.";
		close;
		break;
	case 0:
		setquest 70001;
		break;
	}	
}

1@gef,122,58,4	script	Receptionist::gef_magic_reception	937,{
	
	.npc$ = "[Tournament Receptionist]";
	
	if('warp_stadium) {
		mes .npc$;
		mes "The Magic Tournament is going to start soon.";
		mes "Enter the portal to the south and you can join in.";
		next;
		mes .npc$;
		mes "Good luck!";
		close;
	}
	if('test_success) {
		mes .npc$;
		mes "Congratulations! You passed the test!";
		mes "Give me your name so I can write it down.";
		mes "You will automatically be registered for the tournament now.";
		next;
		input .@name$;
		mes .npc$;
		mes strcharinfo(0) + "?";
		mes "Okay, interesting name.";
		mes "Anyway, your registration is complete!";
		next;
		mes .npc$;
		mes "Competitors who registered will randomly be selected.";
		next;
		mes .npc$;
		mes "The Magic Tournament is going to start soon.";
		mes "Enter the portal to the south and you can join in.";
		next;
		mes .npc$;
		mes "Good luck!";
		'warp_stadium = 1;
		enablenpc instance_npcname("gef_stadium_warp");
		close;
	}
	mes .npc$;
	mes "Thank you for visiting Geffen";
	mes "Magic Tournament.";
	mes "What can I do for you?";
	next;
	switch(select("About Geffen Magic Tournament:How do I Register?:Collecting Rewards:Can I get a Spectator Pass?:Cancel")) {
	case 1:
		mes .npc$;
		break;
	case 2:
		mes .npc$;
		mes "There is no registration fee to enter.";
		mes "The only requirement is to pass a simple test.";
		next;
		mes .npc$;
		mes "The test is very simple. Defeat a Desert Wolf in 60 seconds or less and you're in.";
		next;
		mes .npc$;
		mes "If you fail you will automatically be eliminated from the list but you can try again as many times as you wish.";
		mes "Do you want to take the test?";
		next;
		switch(select("No:Yes")) {
		case 1:
			mes .npc$;
			mes "Come back if you change your mind.";
			close;
		case 2:
			mes .npc$;
			mes "You can participate in the Magic Tournament after passing the test. Then, let us begin!";
			hideonnpc instance_npcname("gef_magic_reception");
			npctalk "The time limit is 60 seconds! Ready! Set! Go!";
			monster instance_mapname("1@gef"),118,62,"Desert Wolf",1106,1,instance_npcname("gef_magic_reception") + "::OnDesertWolfDead";
			setquest 70002;
			close2;
			break;
		}
		break;
	case 3:
	case 4:
		mes "<Placeholder>";
		close;
	case 5:
		close;
	}
	end;
	
OnDesertWolfDead:
	if(checkquest(70002,PLAYTIME) == 2) {
		hideoffnpc instance_npcname("gef_magic_reception");
		npctalk "You have failed! You can come back and try again.";
		erasequest 70002;
		end;
	}
	erasequest 70002;
	'test_success = 1;
	hideoffnpc instance_npcname("gef_magic_reception");
	npctalk "You passed the test! Shall we finish your registration?";
	end;
}

1@gef,120,35,0	script	gef_stadium_warp	45,2,2,{

OnInstanceInit:
	disablenpc instance_npcname(strnpcinfo(0));
	end;

OnTouch:	
	warp instance_mapname("1@ge_st"),104,50;
	end;
}

1@ge_st,109,57,4	script	Geffen Academy Master::gef_magic_mc	10006,{
	
	.npc$ = "[Magic Academy Master]";	
	
	if (!'round) {
		cutin "acamaster_a",2;
		'round = 1;
		mes .npc$;
		mes "Ladies and gentlemen!";
		mes "Welcome to Geffen Magic Tournament!";
		'accountid = getattachedrid();
		next;
		mes .npc$;
		mes "Today a champion will be crowned.";
		next;
		mes .npc$;
		mes "There are 2 divisions this year divided into group A and B.";
		mes "The winner of each group will face each other for the championship match.";
		next;
		mes .npc$;
		mes "I am the MC of group A.";
		mes "Geffen Academy Master~!";
		mes "Archmeiji Janjiar Helmode";
		next;
		mes .npc$;
		mes "I'm honored to be this year's MC.";
		mes "Now it's time for the matches to begin.";
		next;
		mes .npc$;
		mes "Ahem...";
		cutin "",255;
		close2;
		sleep2 500;
		npcskilleffect 51,0,90,48;
		npctalk "Ladies and Gentlemen!";
		sleep2 1500;
		npctalk "I do my best to be as loud as I can!";
		sleep2 1500;
		npctalk "The Geffen Magic Tournament will now commence!";
		enablenpc instance_npcname("gef_magic_round1");
		donpcevent instance_npcname("gef_magic_round1") + "::OnRound1Start";
		sleep2 3000;
		npctalk "Start the 1st match for Group A.";
		sleep2 1500;
		npctalk "The one who looks weak enough to lose in the 1st game!";
		sleep2 1500;
		npctalk "Welcome the unknown competitor! " + strcharinfo(0) + "";
		sleep2 2500;
		npctalk "And the other competitor~!!!";
		sleep2 2000;
		npctalk "Give them a good show!";
		sleep2 1500;
		npctalk "Give it your best by Novice Arhi!";
		sleep2 3000;
		npctalk "Time limit is 3 minutes. If there is no victor in 3 minutes...";
		sleep2 2500;
		npctalk "Begin!";
		sleep2 2000;
		npctalk "A match has started. This is so exciting.";
		end;
	}
	end;
	
OnRound1Won:
	'round = 2;
	sleep2 1500;
	npctalk "The first match of Group A is finished~! Each match winner will receive a reward";
	sleep2 3000;
	npctalk "You may take some time to heal your wounds.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 3000;
	enablenpc instance_npcname("gef_magic_guide");
	end;
	
OnRound2Start:
	attachrid('accountid);
	sleep2 1000;
	npctalk "The 2nd match of Group A has begun!";
	sleep2 1500;
	npctalk "To the weak looking competitor...";
	sleep2 1500;
	npctalk "Leaves will eventually fall " + strcharinfo(0) + "!";
	sleep2 3000;
	npctalk "Our next competitor is~!!!";
	sleep2 1500;
	npctalk "Despite his skipping classes at the Magic Academy...";
	sleep2 1500;
	npctalk "Big round of applause to Mage hopeful, Dio Anemos!";
	sleep2 3000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 1500;
	npctalk "This one is going to need judgment to find a winner!";
	sleep2 1500;
	npctalk "Let's get it on!";
	sleep2 2500;
	npctalk "A match has started. This is so exciting.";
	end;
	
OnRound2Won:
	'round = 3;
	sleep2 1000;
	npctalk "The 2nd match of Group A is finished~! Each match winner will receive a reward";
	sleep2 3000;
	npctalk "You will be given time to heal any injuries.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 4000;
	enablenpc instance_npcname("gef_magic_guide");
	end;

OnRound3_1Start:
	attachrid('accountid);
	npctalk "Welcome back our competitor!";
	sleep2 2000;
	npctalk "And the other competitor~!";
	sleep2 2000;
	npctalk "With a mischieveous grin on his face!";
	sleep2 2000;
	npctalk "Geffen's Theif guildmaster! Geffen Shoplifter!";
	sleep2 2000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 2000;
	npctalk "The match will be decided by 3 judges.";
	sleep2 2000;
	npctalk "Let's get it on!";
	sleep2 2000;
	npctalk "A match has started. This is so exciting.";
	end;

OnRound3_2Start:
	attachrid('accountid);
	sleep2 1000;
	npctalk "The 3rd match of Group A has begun!";
	sleep2 1500;
	npctalk "Welcome back our competitor!";
	sleep2 5000;
	npctalk "And the other competitor~!";
	sleep2 1500;
	npctalk "With a smile that only a mother can love.";
	sleep2 1500;
	npctalk "The ruthless! Geffen Bully!";
	sleep2 3000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 1500;
	npctalk "The match will be decided by 3 judges.";
	sleep2 1500;
	npctalk "Let's get it on!";
	sleep2 2500;
	npctalk "A match has started. This is so exciting.";
	end;
	
OnRound3_1Won:
OnRound3_3Won:
	'round = 4;
	npctalk "The " + 'round_name$['round - 2] + " match of Group A is finished~! Each match winner will receive a reward";
	sleep2 2000;
	npctalk "You will be given time to heal any injuries.";
	sleep2 2000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	enablenpc instance_npcname("gef_magic_guide");
	enablenpc instance_npcname("gef_magic_healer");
	sleep2 2000;
	npctalk "Fenris Fenrir has 3 consecutive victories~!";
	end;
	
OnRound3_2Won:
	'round = 4;
	sleep2 1500;
	npctalk "The " + 'round_name$['round - 2] + " match of Group A is finished~! Each match winner will receive a reward";
	sleep2 3000;
	npctalk "You will be given time to heal any injuries.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 4000;
	enablenpc instance_npcname("gef_magic_guide");
	enablenpc instance_npcname("gef_magic_healer");
	npctalk "Fenris Fenrir has 3 consecutive victories~!";
	end;
	
OnRound4Start:
	attachrid('accountid);
	sleep2 1000;
	npctalk "The surprise of this year's tournament~!";
	sleep2 1000;
	npctalk "The unrivaled " + strcharinfo(0) + "!";
	sleep2 1500;
	npctalk "And the other competitor~!!!";
	sleep2 1500;
	npctalk "Entering the ring with pomp and circumstance.";
	sleep2 1500;
	npctalk "Prontera style, Feymont!";
	sleep2 4000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 2000;
	npctalk "The match will be decided by 3 judges.";
	sleep2 2000;
	npctalk "Let's get it on!";
	sleep2 1500;
	npctalk "A match has started. This is so exciting.";
	end;
	
OnRound4Won:
	'round = 5;
	sleep2 2500;
	npctalk "The " + 'round_name$['round - 2] + " match of Group A is finished~! Each match winner will receive a reward";
	sleep2 2500;
	npctalk "You will be given time to heal any injuries.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 3000;
	enablenpc instance_npcname("gef_magic_guide");
	end;
	
OnRound5Start:
	attachrid('accountid);
	sleep2 500;
	npctalk "This isn't just a fluke ladies and gents!";
	sleep2 1500;
	npctalk "The remarkable rookie! " + strcharinfo(0) + "!";
	sleep2 3000;
	npctalk "And the other competitor~!!!";
	sleep2 1500;
	npctalk "One who promises to fight with honor!";
	sleep2 1000;
	npctalk "The self-proclaimed master of battle. Ordre!";
	sleep2 3000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 2000;
	npctalk "The match will be decided by 3 judges.";
	sleep2 1500;
	npctalk "Let's get it on!";
	sleep2 2500;
	npctalk "A match has started. This is so exciting.";
	end;

OnRound5Won:
	'round = 6;
	sleep2 1000;
	npctalk "The " + 'round_name$['round - 2] + " match of Group A is finished~! Each match winner will receive a reward";
	sleep2 3000;
	npctalk "You will be given time to heal any injuries.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 3000;
	enablenpc instance_npcname("gef_magic_guide");
	end;
	
OnRound6Start:
	attachrid('accountid);
	sleep2 1000;
	npctalk "The incredibly powerful!";
	sleep2 1500;
	npctalk "Super rookie of this year's tournament~! " + strcharinfo(0) + "!";
	sleep2 3000;
	npctalk "And the other competitor~!!!";
	sleep2 1500;
	npctalk "One who's cute on the outside but cruelly destroys enemies!";
	sleep2 1500;
	npctalk "Rabbit's ear of blood~!!! Blut Hase!";
	sleep2 3000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 1500;
	npctalk "Let's get it on!";
	sleep2 2000;
	npctalk "A match has started. This is so exciting.";
	end;
	
OnRound6Won:
	'round = 7;
	sleep 1000;
	npctalk "The " + 'round_name$['round - 2] + " match of Group A is finished~! Each match winner will receive a reward";
	sleep2 3000;
	npctalk "You will be given time to heal any injuries.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 4000;
	npctalk "Okay~! There is news from Group B!";
	sleep2 2000;
	npctalk "While all competitors are doing their best, Fenrir";
	sleep2 1500;
	npctalk "took the tournament by storm by winning 5 consecutive matches!";
	enablenpc instance_npcname("gef_magic_guide");
	enablenpc instance_npcname("gef_magic_healer");
	end;
	
OnRound7Start:
	attachrid('accountid);
	sleep2 1000;
	npctalk "Continuing the march of victory~!";
	sleep2 1500;
	npctalk "Welcome back! " + strcharinfo(0) + "!";
	sleep2 3000;
	npctalk "And the other competitor~!!!";
	sleep2 1500;
	npctalk "Have you ever seen evil? If not, you will see it today...";
	sleep2 1500;
	npctalk "aka the evil tooth! Kuro Akuma!";
	sleep2 3000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 1500;
	npctalk "The match will be decided by 3 judges.";
	sleep2 1500;
	npctalk "Let's get it on!";
	sleep2 2000;
	npctalk "A match has started. This is so exciting.";
	end;
	
OnRound7Won:
	'round = 8;
	sleep 1000;
	npctalk "The " + 'round_name$['round - 2] + " match of Group A is finished~! Each match winner will receive a reward";
	sleep2 3000;
	npctalk "You will be given time to heal any injuries.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 3000;
	enablenpc instance_npcname("gef_magic_guide");
	end;
	
OnRound8Start:
	attachrid('accountid);
	sleep2 1000;
	npctalk "The darling of this year's tournament!";
	sleep2 1500;
	npctalk "Rune Midgard's newest star! " + strcharinfo(0) + "!";
	sleep2 3000;
	npctalk "And the other competitor~!!!";
	sleep2 1500;
	npctalk "Slow as a turtle but fast as a hare.";
	sleep2 1500;
	npctalk "The maniac of Rune Midgard! Ifodes!";
	sleep2 3000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 1500;
	npctalk "The match will be decided by 3 judges.";
	sleep2 1500;
	npctalk "Let's get it on!";
	sleep2 2000;
	npctalk "A match has started. This is so exciting.";
	end;

OnRound8Won:
	'round = 9;
	sleep 1000;
	npctalk "The " + 'round_name$['round - 2] + " match of Group A is finished~! Each match winner will receive a reward";
	sleep2 3000;
	npctalk "You will be given time to heal any injuries.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 3000;
	enablenpc instance_npcname("gef_magic_guide");
	end;
	
OnRound9Start:
	attachrid('accountid);
	sleep2 1000;
	if(Sex) {
		npctalk "Who is going to stop him!!";
	} else {
		npctalk "Who is going to stop her!!";
	}
	sleep2 1500;
	npctalk "The best player who represents Rune Midgard! " + strcharinfo(0) + "!";
	sleep2 3000;
	npctalk "And the other competitor~!!!";
	sleep2 1500;
	npctalk "Attack you like a snake after approaching like a lady!!";
	sleep2 1500;
	npctalk "A lady of death~!!! Licheni!";
	sleep2 3000;
	npctalk "Time limit is 3 minutes. If there is no winner after that...";
	sleep2 1500;
	npctalk "The match will be decided by 3 judges.";
	sleep2 1500;
	npctalk "Let's get it on!";
	sleep2 2000;
	npctalk "A match has started. This is so exciting.";
	end;
	
OnRound9Won:
	'round = 10;
	sleep 1000;
	npctalk "The " + 'round_name$['round - 2] + " match of Group A is finished~! Each match winner will receive a reward";
	sleep2 3000;
	npctalk "You will be given time to heal any injuries.";
	sleep2 3000;
	npctalk "Please tell the Tournament Guide when you are ready for the next round.";
	sleep2 3000;
	npctalk "It is getting exciting! More news from Group B!";
	sleep2 2000;
	npctalk "Fenris Fenrir is continuing her dominance~! Those in Group A better beware!";
	enablenpc instance_npcname("gef_magic_guide");
	enablenpc instance_npcname("gef_magic_healer");
	end;
	
OnRoundEnd:
	end;
}

1@ge_st,107,57,4	script	Tournament Guide::gef_magic_guide	899,{
	
	.npc$ = "[Tournament Guide]";
	
	switch(select("Start " + 'round_name$['round - 1] + " match and get reward:End Conversation")) {
	case 1:
		mes .npc$;
		mes "Passed " + 'round_name$['round - 2] + " match!";
		mes "Congratulations!";
		next;
		mes .npc$;
		mes "Winners of each round will receive a reward of";
		mes "^007F00" + getitemname(6671) + "^000000";
		next;
		mes .npc$;
		mes "^007F00" + getitemname(6671) + "^000000 can be exchanged in Geffen with the ^007F00Geffen Coin Operator^000000 for special equipment.";
		next;
		mes .npc$;
		mes "The " + 'round_name$['round - 1] + " match of Group A has begun.";
		enablenpc instance_npcname("gef_magic_round" + 'npc_name$['round - 1]);
		close2;
		warp instance_mapname("1@ge_st"),104,50;
		disablenpc instance_npcname("gef_magic_healer");
		donpcevent instance_npcname("gef_magic_round" + 'npc_name$['round - 1]) + "::OnRound" + 'npc_name$['round - 1] + "Start";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Start";
		disablenpc instance_npcname("gef_magic_guide");
		break;
	case 2:
		mes .npc$;
		mes "Talk to me again when you are ready.";
		close;
	}
		
OnInstanceInit:
	disablenpc instance_npcname("gef_magic_guide");
	setarray 'map_name$[0],instance_mapname("1@gef"),instance_mapname("1@ge_st");
	setarray 'round3_name$[0],"3_1","3_2","3_3";
	setarray 'round12_name$[0],"12_1","12_2";
	'round3$ = 'round3_name$[0];
	'round12$ = 'round12_name$[rand(2)];
	setarray 'npc_name$[0],"1","2",'round3$,"4","5","6","7","8","9","10","11",'round12$,"13"; 
	setarray 'round_name$[0],"1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","Final";
	end;
}

1@ge_st,109,50,4	script	Tournament Healer::gef_magic_healer	475,{
	
	.npc$ = "[Tournament Healer]";

	switch(select("Heal me!:Cancel")) {
	case 1:
		percentheal 100,100;
		mes .npc$;
		mes "Administering medical care.";
		next;
		mes .npc$;
		mes "Good luck~!";
		close;
	case 2:
		mes .npc$;
		mes "You should heal your wounds before starting the next fight.";
		close;
	}

OnInstanceInit:
	disablenpc instance_npcname("gef_magic_healer");
	end;
}


1@ge_st,114,50,4	script	Arhi::gef_magic_round1	670,{
	
	end;
	
OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round1");
	end;

OnRound1Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 2000;
	npctalk "The first match always make me nervous~!";
	sleep2 1000;
	npctalk "Can I win?";
	sleep2 1500;
	if(Sex) {
		npctalk "I guess it will be okay. This guy seems weak.";
	} else {
		npctalk "I guess it will be okay. This girl seems weak";
	}
	sleep2 4500;
	npctalk "OK just relax~!";
	sleep2 2000;
	npctalk "Ah... Finally, it's going to start soon!";
	sleep2 4000;
	npctalk "Just relax~!";
	sleep2 2800;
	hideonnpc instance_npcname("gef_magic_round1");
	monster instance_mapname("1@ge_st"),114,50,"Aruhi",1002,1,instance_npcname("gef_magic_round1")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round1")+"::OnMyMobDead") > 0) {
		killmonster instance_mapname("1@ge_st"),instance_npcname("gef_magic_round1")+"::OnMyMobDead";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round1");
	end;
	
OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round1");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound1Won";
	sleep2 1500;
	npctalk "Ah... I lost the first match...";
	sleep2 1500;
	npctalk "How can I talk to my family...";
	sleep2 1500;
	npctalk "So shameful...";
	sleep2 1500;
	npctalk "Ah.... My friends will laugh at me..";
	sleep2 1500;
	npctalk "Weeping...";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round1");
	disablenpc instance_npcname("gef_magic_round1");
	end;

}

1@ge_st,114,50,4	script	Dio Anemos::gef_magic_round2	669,{
	
	end;

OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round2");
	end;
	
OnRound2Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 2500;
	npctalk "The 2nd match has started.";
	sleep2 1500;
	npctalk "You look like weak competition.";
	sleep2 1500;
	npctalk "I think I have a good chance...";
	sleep2 1500;
	npctalk "I wish the match would start as soon as possible.";
	sleep2 1500;
	npctalk "Finish it quickly and we can get some cookies.";
	sleep2 1500;
	npctalk "Okay then. Let's start.";
	sleep2 7500;
	hideonnpc instance_npcname("gef_magic_round2");
	monster instance_mapname("1@ge_st"),114,50,"Dio Anemos",1002,1,instance_npcname("gef_magic_round2")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round2")+"::OnMyMobDead") > 0) {
		killmonster instance_mapname("1@ge_st"),instance_npcname("gef_magic_round2")+"::OnMyMobDead";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round2");
	end;
	
OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round2");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound2Won";
	sleep2 1000;
	npctalk "Oh my god...";
	sleep2 1500;
	npctalk "I lost...";
	sleep2 1500;
	npctalk "Ah, Ah... to this random loser.";
	sleep2 1500;
	npctalk "My skill has gotten worse...";
	sleep2 1500;
	npctalk "Ah, Ah.... sad..";
	sleep2 1500;
	npctalk "Ahhhh why?";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round2");
	disablenpc instance_npcname("gef_magic_round2");
	end;
}

1@ge_st,114,50,4	script	Geffen Shoplifter::gef_magic_round3_1	671,{
	end;

OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round3_1"); 
	end;

OnRound3_1Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	npctalk "There are so many people gathered here.";
	sleep2 1000;
	npctalk "I thought there would be something I can steal.";
	sleep2 1000;
	npctalk "But I can't steal because of all the attention it will cause.";
	sleep2 1000;
	npctalk "Ah.... This is not good.";
	sleep2 1000;
	npctalk "I guess I am fighting in this tournament...";
	sleep2 1000;
	npctalk "Well~! Let's win anyway!";
	sleep2 6000;
	hideonnpc instance_npcname("gef_magic_round3_1");
	monster instance_mapname("1@ge_st"),114,50,"Geffen Shoplifter",1002,1,instance_npcname("gef_magic_round3_1")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round3_1")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round3_1");
	end;
	
OnMyMobDead:
	hideoffnpc instance_npcname("gef_magic_round3_1");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 2000;
	npctalk "Oh my gods... I was defeated...";
	sleep2 2000;
	npctalk "I have been stealing too much.";
	sleep2 2000;
	npctalk "My battle power has been reduced.";
	sleep2 2000;
	npctalk "Ah... It can't be...";
	sleep2 2000;
	npctalk "You need to train more if you continue to steal.";
	sleep2 2000;
	npctalk "Ahem... Anyway, let's run away from here!";
	sleep2 2000;
	hideonnpc instance_npcname("gef_magic_round3_1");
	disablenpc instance_npcname("gef_magic_round3_1");
	end;
}

1@ge_st,114,50,4	script	Geffen Bully::gef_magic_round3_2	681,{
	end;
	
OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round3_2");
	end;	
	
OnRound3_2Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 3000;
	npctalk "I got you. You know my face?";
	sleep2 1500;
	npctalk "I will beat you down today!";
	sleep2 1000;
	npctalk "Give me zeny!";
	sleep2 1500;
	npctalk "You will be crying until you get home!";
	sleep2 1500;
	npctalk "Do you really want me to show you my 20 years skill of bullying?";
	sleep2 1500;
	npctalk "You are dead now!!";
	sleep2 8000;
	hideonnpc instance_npcname("gef_magic_round3_2");
	monster instance_mapname("1@ge_st"),114,50,"Geffen Shoplifter",1002,1,instance_npcname("gef_magic_round3_2")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round3_2")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round3_2");
	end;
	
OnMyMobDead:
	sleep2 2000;
	hideoffnpc instance_npcname("gef_magic_round3_2");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 1500;
	npctalk "I can't believe that nerd beat me";
	sleep2 1500;
	npctalk "It can't be!!";
	sleep2 1500;
	npctalk "Doesn't make sense!!! I wanted to steal zeny!!";
	sleep2 1500;
	npctalk "If it is found out, everyone in Geffen.";
	sleep2 1500;
	npctalk "will laugh at me.......";
	sleep2 1500;
	npctalk "Ah, AhAh...!!! It can't be!!!";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round3_2");
	disablenpc instance_npcname("gef_magic_round3_2");
	end;	
}

1@ge_st,114,50,4	script	Geffen Assassin::gef_magic_round3_3	682,{
	end;
	
OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round3_3");
	end;
}

1@ge_st,114,50,4	script	Feymont::gef_magic_round4	672,{
	
	end;
	
OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round4");
	end;
	
OnRound4Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 1000;
	npctalk "This competing partner is...";
	sleep2 1000;
	npctalk "Seems to be lucky?";
	sleep2 1500;
	npctalk "I do not want to get my hands dirty.";
	sleep2 1500;
	npctalk "Ah... I should handle it in a sophisticated way..";
	sleep2 1500;
	npctalk "Ahem... This is going to start now.";
	sleep2 9500;
	hideonnpc instance_npcname("gef_magic_round4");
	monster instance_mapname("1@ge_st"),114,50,"Feymont",1002,1,instance_npcname("gef_magic_round4")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round4")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round4");
	end;
	
OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round4");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 2000;
	npctalk "I can't believe that I lost.";
	sleep2 2000;
	npctalk "To the one with no dignity.";
	sleep2 1000;
	npctalk "This is insulting.";
	sleep2 1000;
	npctalk "Lots of girl fans will be disappointed at me losing.";
	sleep2 2000;
	npctalk "Ah, Ah... How can I get outside?";
	sleep2 1500;
	npctalk "I should not be walking outside";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round4");
	disablenpc instance_npcname("gef_magic_round4");
	end;
}

1@ge_st,114,50,4	script	Ordre::gef_magic_round5	673,{
	
	end;
	
OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round5");
	end;

OnRound5Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 500;
	npctalk "One! Two! One! Two!";
	sleep2 1500;
	npctalk "Let's climb the stairs one by one!";
	sleep2 1500;
	npctalk "I have been tried so hard!";
	sleep2 1500;
	npctalk "It won't just go away";
	sleep2 1500;
	npctalk "Let's do our best to the ones in front of you.";
	sleep2 1000;
	npctalk "Shall we start?";
	sleep2 8000;
	hideonnpc instance_npcname("gef_magic_round5");
	monster instance_mapname("1@ge_st"),114,50,"Odre",1002,1,instance_npcname("gef_magic_round5")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round5")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round5");
	end;
	
OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round5");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 1000;
	npctalk "Defeated.";
	sleep2 2000;
	npctalk "You need more practice.";
	sleep2 1000;
	npctalk "You have to train harder.";
	sleep2 1000;
	npctalk "It's twice more than I used to train.";
	sleep2 2000;
	npctalk "Let's start again!";
	sleep2 1500;
	npctalk "Let's go!";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round5");
	disablenpc instance_npcname("gef_magic_round5");
	end;
}

1@ge_st,114,50,4	script	Blut Hase::gef_magic_round6	674,{

	end;

OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round6");
	end;
	
OnRound6Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 1000;
	npctalk "You came all the way up here.";
	sleep2 1500;
	npctalk "Probably, all competitors are also strong enough?";
	sleep2 1500;
	npctalk "But I did not build my reputation for nothing.";
	sleep2 1500;
	npctalk "Fear my rabbit headgear.";
	sleep2 1500;
	npctalk "You are in my way!";
	sleep2 1500;
	npctalk "You will be one of my sacrifices!!";
	sleep2 6000;
	hideonnpc instance_npcname("gef_magic_round6");
	monster instance_mapname("1@ge_st"),114,50,"Blut Hase",1002,1,instance_npcname("gef_magic_round6")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round6")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round6");
	end;

OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round6");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 1000;
	npctalk "I will not lose!";
	sleep2 1500;
	npctalk "My reputation... My popularity.";
	sleep2 1500;
	npctalk "are going to fall down...";
	sleep2 1500;
	npctalk "I can't accept the result!";
	sleep2 1500;
	npctalk "I will regain my reputation!";
	sleep2 1500;
	npctalk "See you at next competition!";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round6");
	disablenpc instance_npcname("gef_magic_round6");
	end;
}

1@ge_st,114,50,4	script	Kuro Akuma::gef_magic_round7	675,{
	
	end;

OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round7");
	end;	
	
OnRound7Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 1000;
	npctalk "Finally, the 7th game has started~!";
	sleep2 1500;
	npctalk "Have you seen the evil?";
	sleep2 1500;
	npctalk "If not? You are lucky~!";
	sleep2 1500;
	npctalk "It will be a good experience for today~!";
	sleep2 1500;
	npctalk "Nobody who stood in front of me has survived~!";
	sleep2 1500;
	npctalk "I will destroy you if I must~!";
	sleep2 7000;
	hideonnpc instance_npcname("gef_magic_round7");
	monster instance_mapname("1@ge_st"),114,50,"Kuro Akuma",1002,1,instance_npcname("gef_magic_round7")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round7")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round7");
	end;

OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round7");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 1000;
	npctalk "Oh my gods...";
	sleep2 1500;
	npctalk "I am a tooth of the devil...";
	sleep2 1500;
	npctalk "I actually lost...";
	sleep2 1500;
	npctalk "Yikes ah, ah, ah Kuh yikes ah, ah ,ah!!";
	sleep2 1500;
	npctalk "I can't lose!!!!";
	sleep2 1500;
	npctalk "If we meet again, I will get my revenge!";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round7");
	disablenpc instance_npcname("gef_magic_round7");
	end;
}

1@ge_st,114,50,4	script	Ifodes::gef_magic_round8	676,{
	
	end;

OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round8");
	end;	
	
OnRound8Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 1000;
	npctalk "At long last the 8th game has started.";
	sleep2 1500;
	npctalk "No one can attack me.";
	sleep2 1500;
	npctalk "But I can kill anyone!";
	sleep2 1500;
	npctalk "There will be no chance to laugh again!";
	sleep2 1500;
	npctalk "If a match has started, your laughter will turn to tears instead!";
	sleep2 1500;
	npctalk "Shall we start?";
	sleep2 7000;
	hideonnpc instance_npcname("gef_magic_round8");
	monster instance_mapname("1@ge_st"),114,50,"Ifodes",2558,1,instance_npcname("gef_magic_round8")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round8")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round8");
	end;
	
OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round8");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 1000;
	npctalk "I will not lose the game!!";
	sleep2 1500;
	npctalk "This is nonsense...";
	sleep2 1500;
	npctalk "How could this happen?";
	sleep2 1500;
	npctalk "I can't understand!";
	sleep2 1500;
	npctalk "That weak looking fighter...";
	sleep2 1500;
	npctalk "Argggh!";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round8");
	disablenpc instance_npcname("gef_magic_round8");
	end;
}

1@ge_st,114,50,4	script	Licheni::gef_magic_round9	677,{
	
	end;

OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round9");
	end;	
	
OnRound9Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 1000;
	npctalk "Ho ho ho~!!";
	sleep2 1500;
	npctalk "The competitor of the 9th match looks scary~!";
	sleep2 1500;
	npctalk "Do not scare me~!";
	sleep2 1500;
	npctalk "I am a lady~!";
	sleep2 1500;
	npctalk "But, if a match starts!";
	sleep2 1500;
	npctalk "Giggling... I will bite them!";
	sleep2 7000;
	hideonnpc instance_npcname("gef_magic_round9");
	monster instance_mapname("1@ge_st"),114,50,"Ifodes",2558,1,instance_npcname("gef_magic_round9")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round9")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round9");
	end;	
	
OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round9");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 1000;
	npctalk "How could you do this to me?";
	sleep2 1500;
	npctalk "You try to beat me with cruelty... to a lady like me.";
	sleep2 1500;
	npctalk "I am very sad.";
	sleep2 1500;
	npctalk "Weeping...";
	sleep2 1500;
	npctalk "But when you see me next time!";
	sleep2 1500;
	npctalk "I will beat you with more than laughter!";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round9");
	disablenpc instance_npcname("gef_magic_round9");
	end;
}

1@ge_st,114,50,4	script	Licheni::gef_magic_round10	677,{
	
	end;

OnInstanceInit:
	disablenpc instance_npcname("gef_magic_round9");
	end;	
	
OnRound9Start:
	attachrid('accountid);
	setmapflag instance_mapname("1@ge_st"),mf_noskill;
	pcblockmove getcharid(3),1;
	sleep2 1000;
	npctalk "Ho ho ho~!!";
	sleep2 1500;
	npctalk "The competitor of the 9th match looks scary~!";
	sleep2 1500;
	npctalk "Do not scare me~!";
	sleep2 1500;
	npctalk "I am a lady~!";
	sleep2 1500;
	npctalk "But, if a match starts!";
	sleep2 1500;
	npctalk "Giggling... I will bite them!";
	sleep2 7000;
	hideonnpc instance_npcname("gef_magic_round9");
	monster instance_mapname("1@ge_st"),114,50,"Ifodes",2558,1,instance_npcname("gef_magic_round9")+"::OnMyMobDead";
	pcblockmove getcharid(3),0;
	removemapflag instance_mapname("1@ge_st"),mf_noskill;
	sleep2 180000;	if(mobcount(instance_mapname("1@ge_st"),instance_npcname("gef_magic_round9")+"::OnMyMobDead") > 0) {
		atcommand "killmonster2";
		donpcevent instance_npcname("gef_magic_mc") + "::OnRoundEnd";
	}
	disablenpc instance_npcname("gef_magic_round9");
	end;	
	
OnMyMobDead:
	sleep2 3000;
	hideoffnpc instance_npcname("gef_magic_round9");
	donpcevent instance_npcname("gef_magic_mc") + "::OnRound" + 'npc_name$['round - 1] + "Won";
	sleep2 1000;
	npctalk "How could you do this to me?";
	sleep2 1500;
	npctalk "You try to beat me with cruelty... to a lady like me.";
	sleep2 1500;
	npctalk "I am very sad.";
	sleep2 1500;
	npctalk "Weeping...";
	sleep2 1500;
	npctalk "But when you see me next time!";
	sleep2 1500;
	npctalk "I will beat you with more than laughter!";
	sleep2 1500;
	hideonnpc instance_npcname("gef_magic_round9");
	disablenpc instance_npcname("gef_magic_round9");
	end;
}